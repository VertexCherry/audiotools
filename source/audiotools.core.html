<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AudioSignal &mdash; AudioTools  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data processing" href="audiotools.data.html" />
    <link rel="prev" title="Creating listening tests" href="../tutorials/listening_tests.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> AudioTools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Introduction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/transforms.html">Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/listening_tests.html">Creating listening tests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">AudioSignal</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-audiotools.core.audio_signal">Base functionality</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal"><code class="docutils literal notranslate"><span class="pre">AudioSignal</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.audio_data"><code class="docutils literal notranslate"><span class="pre">AudioSignal.audio_data</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.batch"><code class="docutils literal notranslate"><span class="pre">AudioSignal.batch()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.batch_size"><code class="docutils literal notranslate"><span class="pre">AudioSignal.batch_size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.clone"><code class="docutils literal notranslate"><span class="pre">AudioSignal.clone()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.compute_stft_padding"><code class="docutils literal notranslate"><span class="pre">AudioSignal.compute_stft_padding()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.copy"><code class="docutils literal notranslate"><span class="pre">AudioSignal.copy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.cpu"><code class="docutils literal notranslate"><span class="pre">AudioSignal.cpu()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.cuda"><code class="docutils literal notranslate"><span class="pre">AudioSignal.cuda()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.deepcopy"><code class="docutils literal notranslate"><span class="pre">AudioSignal.deepcopy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.detach"><code class="docutils literal notranslate"><span class="pre">AudioSignal.detach()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.device"><code class="docutils literal notranslate"><span class="pre">AudioSignal.device</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.duration"><code class="docutils literal notranslate"><span class="pre">AudioSignal.duration</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.excerpt"><code class="docutils literal notranslate"><span class="pre">AudioSignal.excerpt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.float"><code class="docutils literal notranslate"><span class="pre">AudioSignal.float()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.get_dct"><code class="docutils literal notranslate"><span class="pre">AudioSignal.get_dct()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.get_mel_filters"><code class="docutils literal notranslate"><span class="pre">AudioSignal.get_mel_filters()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.get_window"><code class="docutils literal notranslate"><span class="pre">AudioSignal.get_window()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.hash"><code class="docutils literal notranslate"><span class="pre">AudioSignal.hash()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.istft"><code class="docutils literal notranslate"><span class="pre">AudioSignal.istft()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.length"><code class="docutils literal notranslate"><span class="pre">AudioSignal.length</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.load_from_array"><code class="docutils literal notranslate"><span class="pre">AudioSignal.load_from_array()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.load_from_file"><code class="docutils literal notranslate"><span class="pre">AudioSignal.load_from_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.log_magnitude"><code class="docutils literal notranslate"><span class="pre">AudioSignal.log_magnitude()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.magnitude"><code class="docutils literal notranslate"><span class="pre">AudioSignal.magnitude</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.markdown"><code class="docutils literal notranslate"><span class="pre">AudioSignal.markdown()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.mel_spectrogram"><code class="docutils literal notranslate"><span class="pre">AudioSignal.mel_spectrogram()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.mfcc"><code class="docutils literal notranslate"><span class="pre">AudioSignal.mfcc()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.num_channels"><code class="docutils literal notranslate"><span class="pre">AudioSignal.num_channels</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.numpy"><code class="docutils literal notranslate"><span class="pre">AudioSignal.numpy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.path_to_input_file"><code class="docutils literal notranslate"><span class="pre">AudioSignal.path_to_input_file</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.phase"><code class="docutils literal notranslate"><span class="pre">AudioSignal.phase</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.resample"><code class="docutils literal notranslate"><span class="pre">AudioSignal.resample()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.salient_excerpt"><code class="docutils literal notranslate"><span class="pre">AudioSignal.salient_excerpt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.samples"><code class="docutils literal notranslate"><span class="pre">AudioSignal.samples</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.shape"><code class="docutils literal notranslate"><span class="pre">AudioSignal.shape</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.signal_duration"><code class="docutils literal notranslate"><span class="pre">AudioSignal.signal_duration</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.signal_length"><code class="docutils literal notranslate"><span class="pre">AudioSignal.signal_length</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.stft"><code class="docutils literal notranslate"><span class="pre">AudioSignal.stft()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.stft_data"><code class="docutils literal notranslate"><span class="pre">AudioSignal.stft_data</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.stft_params"><code class="docutils literal notranslate"><span class="pre">AudioSignal.stft_params</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.to"><code class="docutils literal notranslate"><span class="pre">AudioSignal.to()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.to_mono"><code class="docutils literal notranslate"><span class="pre">AudioSignal.to_mono()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.trim"><code class="docutils literal notranslate"><span class="pre">AudioSignal.trim()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.truncate_samples"><code class="docutils literal notranslate"><span class="pre">AudioSignal.truncate_samples()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.wave"><code class="docutils literal notranslate"><span class="pre">AudioSignal.wave()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.write"><code class="docutils literal notranslate"><span class="pre">AudioSignal.write()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.zero_pad"><code class="docutils literal notranslate"><span class="pre">AudioSignal.zero_pad()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.zero_pad_to"><code class="docutils literal notranslate"><span class="pre">AudioSignal.zero_pad_to()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.zeros"><code class="docutils literal notranslate"><span class="pre">AudioSignal.zeros()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.audio_signal.STFTParams"><code class="docutils literal notranslate"><span class="pre">STFTParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.STFTParams.hop_length"><code class="docutils literal notranslate"><span class="pre">STFTParams.hop_length</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.STFTParams.match_stride"><code class="docutils literal notranslate"><span class="pre">STFTParams.match_stride</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.STFTParams.padding_type"><code class="docutils literal notranslate"><span class="pre">STFTParams.padding_type</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.STFTParams.window_length"><code class="docutils literal notranslate"><span class="pre">STFTParams.window_length</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.audio_signal.STFTParams.window_type"><code class="docutils literal notranslate"><span class="pre">STFTParams.window_type</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-audiotools.core.display">Displaying and visualizing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.display.DisplayMixin"><code class="docutils literal notranslate"><span class="pre">DisplayMixin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.display.DisplayMixin.save_image"><code class="docutils literal notranslate"><span class="pre">DisplayMixin.save_image()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.display.DisplayMixin.specshow"><code class="docutils literal notranslate"><span class="pre">DisplayMixin.specshow()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.display.DisplayMixin.waveplot"><code class="docutils literal notranslate"><span class="pre">DisplayMixin.waveplot()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.display.DisplayMixin.wavespec"><code class="docutils literal notranslate"><span class="pre">DisplayMixin.wavespec()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.display.DisplayMixin.write_audio_to_tb"><code class="docutils literal notranslate"><span class="pre">DisplayMixin.write_audio_to_tb()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.display.format_figure"><code class="docutils literal notranslate"><span class="pre">format_figure()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-audiotools.core.dsp">Digital signal processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin"><code class="docutils literal notranslate"><span class="pre">DSPMixin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.collect_windows"><code class="docutils literal notranslate"><span class="pre">DSPMixin.collect_windows()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.corrupt_phase"><code class="docutils literal notranslate"><span class="pre">DSPMixin.corrupt_phase()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.high_pass"><code class="docutils literal notranslate"><span class="pre">DSPMixin.high_pass()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.low_pass"><code class="docutils literal notranslate"><span class="pre">DSPMixin.low_pass()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.mask_frequencies"><code class="docutils literal notranslate"><span class="pre">DSPMixin.mask_frequencies()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.mask_low_magnitudes"><code class="docutils literal notranslate"><span class="pre">DSPMixin.mask_low_magnitudes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.mask_timesteps"><code class="docutils literal notranslate"><span class="pre">DSPMixin.mask_timesteps()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.overlap_and_add"><code class="docutils literal notranslate"><span class="pre">DSPMixin.overlap_and_add()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.preemphasis"><code class="docutils literal notranslate"><span class="pre">DSPMixin.preemphasis()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.shift_phase"><code class="docutils literal notranslate"><span class="pre">DSPMixin.shift_phase()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.dsp.DSPMixin.windows"><code class="docutils literal notranslate"><span class="pre">DSPMixin.windows()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-audiotools.core.effects">Audio effects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.effects.EffectMixin"><code class="docutils literal notranslate"><span class="pre">EffectMixin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.CODEC_PRESETS"><code class="docutils literal notranslate"><span class="pre">EffectMixin.CODEC_PRESETS</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.GAIN_FACTOR"><code class="docutils literal notranslate"><span class="pre">EffectMixin.GAIN_FACTOR</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.apply_codec"><code class="docutils literal notranslate"><span class="pre">EffectMixin.apply_codec()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.apply_ir"><code class="docutils literal notranslate"><span class="pre">EffectMixin.apply_ir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.clip_distortion"><code class="docutils literal notranslate"><span class="pre">EffectMixin.clip_distortion()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.convolve"><code class="docutils literal notranslate"><span class="pre">EffectMixin.convolve()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.ensure_max_of_audio"><code class="docutils literal notranslate"><span class="pre">EffectMixin.ensure_max_of_audio()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.equalizer"><code class="docutils literal notranslate"><span class="pre">EffectMixin.equalizer()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.mel_filterbank"><code class="docutils literal notranslate"><span class="pre">EffectMixin.mel_filterbank()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.mix"><code class="docutils literal notranslate"><span class="pre">EffectMixin.mix()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.mulaw_quantization"><code class="docutils literal notranslate"><span class="pre">EffectMixin.mulaw_quantization()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.normalize"><code class="docutils literal notranslate"><span class="pre">EffectMixin.normalize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.pitch_shift"><code class="docutils literal notranslate"><span class="pre">EffectMixin.pitch_shift()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.quantization"><code class="docutils literal notranslate"><span class="pre">EffectMixin.quantization()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.time_stretch"><code class="docutils literal notranslate"><span class="pre">EffectMixin.time_stretch()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.EffectMixin.volume_change"><code class="docutils literal notranslate"><span class="pre">EffectMixin.volume_change()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.effects.ImpulseResponseMixin"><code class="docutils literal notranslate"><span class="pre">ImpulseResponseMixin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.ImpulseResponseMixin.alter_drr"><code class="docutils literal notranslate"><span class="pre">ImpulseResponseMixin.alter_drr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.ImpulseResponseMixin.decompose_ir"><code class="docutils literal notranslate"><span class="pre">ImpulseResponseMixin.decompose_ir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.ImpulseResponseMixin.measure_drr"><code class="docutils literal notranslate"><span class="pre">ImpulseResponseMixin.measure_drr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.effects.ImpulseResponseMixin.solve_alpha"><code class="docutils literal notranslate"><span class="pre">ImpulseResponseMixin.solve_alpha()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-audiotools.core.ffmpeg">FFMPEG routines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.ffmpeg.FFMPEGMixin"><code class="docutils literal notranslate"><span class="pre">FFMPEGMixin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.ffmpeg.FFMPEGMixin.ffmpeg_loudness"><code class="docutils literal notranslate"><span class="pre">FFMPEGMixin.ffmpeg_loudness()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.ffmpeg.FFMPEGMixin.ffmpeg_resample"><code class="docutils literal notranslate"><span class="pre">FFMPEGMixin.ffmpeg_resample()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.ffmpeg.FFMPEGMixin.load_from_file_with_ffmpeg"><code class="docutils literal notranslate"><span class="pre">FFMPEGMixin.load_from_file_with_ffmpeg()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.ffmpeg.ffprobe_offset"><code class="docutils literal notranslate"><span class="pre">ffprobe_offset()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.ffmpeg.r128stats"><code class="docutils literal notranslate"><span class="pre">r128stats()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-audiotools.core.loudness">Perceptual loudness</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.loudness.LoudnessMixin"><code class="docutils literal notranslate"><span class="pre">LoudnessMixin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.loudness.LoudnessMixin.MIN_LOUDNESS"><code class="docutils literal notranslate"><span class="pre">LoudnessMixin.MIN_LOUDNESS</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.loudness.LoudnessMixin.loudness"><code class="docutils literal notranslate"><span class="pre">LoudnessMixin.loudness()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.loudness.Meter"><code class="docutils literal notranslate"><span class="pre">Meter</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.loudness.Meter.apply_filter"><code class="docutils literal notranslate"><span class="pre">Meter.apply_filter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.loudness.Meter.apply_filter_cpu"><code class="docutils literal notranslate"><span class="pre">Meter.apply_filter_cpu()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.loudness.Meter.apply_filter_gpu"><code class="docutils literal notranslate"><span class="pre">Meter.apply_filter_gpu()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.loudness.Meter.filter_class"><code class="docutils literal notranslate"><span class="pre">Meter.filter_class</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.loudness.Meter.forward"><code class="docutils literal notranslate"><span class="pre">Meter.forward()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.loudness.Meter.integrated_loudness"><code class="docutils literal notranslate"><span class="pre">Meter.integrated_loudness()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.loudness.Meter.training"><code class="docutils literal notranslate"><span class="pre">Meter.training</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-audiotools.core.playback">Listening to AudioSignals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.playback.PlayMixin"><code class="docutils literal notranslate"><span class="pre">PlayMixin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.playback.PlayMixin.embed"><code class="docutils literal notranslate"><span class="pre">PlayMixin.embed()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.playback.PlayMixin.play"><code class="docutils literal notranslate"><span class="pre">PlayMixin.play()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.playback.PlayMixin.widget"><code class="docutils literal notranslate"><span class="pre">PlayMixin.widget()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-audiotools.core.util">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.Info"><code class="docutils literal notranslate"><span class="pre">Info</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.util.Info.duration"><code class="docutils literal notranslate"><span class="pre">Info.duration</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.util.Info.num_frames"><code class="docutils literal notranslate"><span class="pre">Info.num_frames</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#audiotools.core.util.Info.sample_rate"><code class="docutils literal notranslate"><span class="pre">Info.sample_rate</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.chdir"><code class="docutils literal notranslate"><span class="pre">chdir()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.choose_from_list_of_lists"><code class="docutils literal notranslate"><span class="pre">choose_from_list_of_lists()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.collate"><code class="docutils literal notranslate"><span class="pre">collate()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.ensure_tensor"><code class="docutils literal notranslate"><span class="pre">ensure_tensor()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.find_audio"><code class="docutils literal notranslate"><span class="pre">find_audio()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.format_figure"><code class="docutils literal notranslate"><span class="pre">format_figure()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.generate_chord_dataset"><code class="docutils literal notranslate"><span class="pre">generate_chord_dataset()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.hz_to_bin"><code class="docutils literal notranslate"><span class="pre">hz_to_bin()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.info"><code class="docutils literal notranslate"><span class="pre">info()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.prepare_batch"><code class="docutils literal notranslate"><span class="pre">prepare_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.random_state"><code class="docutils literal notranslate"><span class="pre">random_state()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.read_sources"><code class="docutils literal notranslate"><span class="pre">read_sources()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.sample_from_dist"><code class="docutils literal notranslate"><span class="pre">sample_from_dist()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#audiotools.core.util.seed"><code class="docutils literal notranslate"><span class="pre">seed()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="audiotools.data.html">Data processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="audiotools.metrics.html">Metrics for audio similarity</a></li>
<li class="toctree-l1"><a class="reference internal" href="audiotools.ml.html">Machine learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="audiotools.post.html">Tools for sharing audio</a></li>
<li class="toctree-l1"><a class="reference internal" href="audiotools.preference.html">Tools for creating preference tests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AudioTools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>AudioSignal</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/audiotools.core.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="audiosignal">
<h1>AudioSignal<a class="headerlink" href="#audiosignal" title="Permalink to this heading"></a></h1>
<section id="module-audiotools.core.audio_signal">
<span id="base-functionality"></span><h2>Base functionality<a class="headerlink" href="#module-audiotools.core.audio_signal" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.audio_signal.</span></span><span class="sig-name descname"><span class="pre">AudioSignal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_path_or_array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Path</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stft_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#audiotools.core.audio_signal.STFTParams" title="audiotools.core.audio_signal.STFTParams"><span class="pre">STFTParams</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#audiotools.core.effects.EffectMixin" title="audiotools.core.effects.EffectMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">EffectMixin</span></code></a>, <a class="reference internal" href="#audiotools.core.loudness.LoudnessMixin" title="audiotools.core.loudness.LoudnessMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoudnessMixin</span></code></a>, <a class="reference internal" href="#audiotools.core.playback.PlayMixin" title="audiotools.core.playback.PlayMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlayMixin</span></code></a>, <a class="reference internal" href="#audiotools.core.effects.ImpulseResponseMixin" title="audiotools.core.effects.ImpulseResponseMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImpulseResponseMixin</span></code></a>, <a class="reference internal" href="#audiotools.core.dsp.DSPMixin" title="audiotools.core.dsp.DSPMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">DSPMixin</span></code></a>, <a class="reference internal" href="#audiotools.core.display.DisplayMixin" title="audiotools.core.display.DisplayMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisplayMixin</span></code></a>, <a class="reference internal" href="#audiotools.core.ffmpeg.FFMPEGMixin" title="audiotools.core.ffmpeg.FFMPEGMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">FFMPEGMixin</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhisperMixin</span></code></p>
<p>This is the core object of this library. Audio is always
loaded into an AudioSignal, which then enables all the features
of this library, including audio augmentations, I/O, playback,
and more.</p>
<p>The structure of this object is that the base functionality
is defined in <code class="docutils literal notranslate"><span class="pre">core/audio_signal.py</span></code>, while extensions to
that functionality are defined in the other <code class="docutils literal notranslate"><span class="pre">core/*.py</span></code>
files. For example, all the display-based functionality
(e.g. plot spectrograms, waveforms, write to tensorboard)
are in <code class="docutils literal notranslate"><span class="pre">core/display.py</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio_path_or_array</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>str</em><em>, </em><em>Path</em><em>, </em><em>np.ndarray</em><em>]</em>) – Object to create AudioSignal from. Can be a tensor, numpy array,
or a path to a file. The file is always reshaped to</p></li>
<li><p><strong>sample_rate</strong> (<em>int</em><em>, </em><em>optional</em>) – Sample rate of the audio. If different from underlying file, resampling is
performed. If passing in an array or tensor, this must be defined,
by default None</p></li>
<li><p><strong>stft_params</strong> (<a class="reference internal" href="#audiotools.core.audio_signal.STFTParams" title="audiotools.core.audio_signal.STFTParams"><em>STFTParams</em></a><em>, </em><em>optional</em>) – Parameters of STFT to use. , by default None</p></li>
<li><p><strong>offset</strong> (<em>float</em><em>, </em><em>optional</em>) – Offset in seconds to read from file, by default 0</p></li>
<li><p><strong>duration</strong> (<em>float</em><em>, </em><em>optional</em>) – Duration in seconds to read from file, by default None</p></li>
<li><p><strong>device</strong> (<em>str</em><em>, </em><em>optional</em>) – Device to load audio onto, by default None</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Loading an AudioSignal from an array, at a sample rate of
44100.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">)</span>
</pre></div>
</div>
<p>Note, the signal is reshaped to have a batch size, and one
audio channel:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(1, 1, 44100)</span>
</pre></div>
</div>
<p>You can treat AudioSignals like tensors, and many of the same
functions you might use on tensors are defined for AudioSignals
as well:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s2">&quot;cuda&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">cuda</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
</pre></div>
</div>
<p>Indexing AudioSignals returns an AudioSignal:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="mi">44100</span><span class="p">:</span><span class="mi">4</span><span class="o">*</span><span class="mi">44100</span><span class="p">]</span>
</pre></div>
</div>
<p>The above signal is 1 second long, and is also an AudioSignal.</p>
<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.audio_data">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">audio_data</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.audio_data" title="Permalink to this definition"></a></dt>
<dd><p>Returns the audio data tensor in the object.</p>
<p>Audio data is always of the shape
(batch_size, num_channels, num_samples). If value has less
than 3 dims (e.g. is (num_channels, num_samples)), then it will
be reshaped to (1, num_channels, num_samples) - a batch size of 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>]</em>) – Audio data to set.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Audio samples.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.batch">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_signals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_signals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncate_signals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resample</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.batch" title="Permalink to this definition"></a></dt>
<dd><p>Creates a batched AudioSignal from a list of AudioSignals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio_signals</strong> (<em>list</em><em>[</em><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal"><em>AudioSignal</em></a><em>]</em>) – List of AudioSignal objects</p></li>
<li><p><strong>pad_signals</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to pad signals to length of the maximum length
AudioSignal in the list, by default False</p></li>
<li><p><strong>truncate_signals</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to truncate signals to length of shortest length
AudioSignal in the list, by default False</p></li>
<li><p><strong>resample</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to resample AudioSignal to the sample rate of
the first AudioSignal in the list, by default False</p></li>
<li><p><strong>dim</strong> (<em>int</em><em>, </em><em>optional</em>) – Dimension along which to batch the signals.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Batched AudioSignal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>RuntimeError</strong> – If not all AudioSignals are the same sample rate, and
    <code class="docutils literal notranslate"><span class="pre">resample=False</span></code>, an error is raised.</p></li>
<li><p><strong>RuntimeError</strong> – If not all AudioSignals are the same the length, and
    both <code class="docutils literal notranslate"><span class="pre">pad_signals=False</span></code> and <code class="docutils literal notranslate"><span class="pre">truncate_signals=False</span></code>,
    an error is raised.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Batching a bunch of random signals:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="o">.</span><span class="n">batch</span><span class="p">(</span><span class="n">signal_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(10, 1, 44100)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.batch_size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch_size</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.batch_size" title="Permalink to this definition"></a></dt>
<dd><p>Batch size of audio signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Batch size of signal.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.clone">
<span class="sig-name descname"><span class="pre">clone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.clone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.clone" title="Permalink to this definition"></a></dt>
<dd><p>Clones all tensors contained in the AudioSignal,
and returns a copy of the signal with everything
cloned. Useful when using AudioSignal within autograd
computation graphs.</p>
<p>Relevant attributes are the stft data, the audio data,
and the loudness of the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Clone of AudioSignal.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.compute_stft_padding">
<span class="sig-name descname"><span class="pre">compute_stft_padding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_stride</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.compute_stft_padding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.compute_stft_padding" title="Permalink to this definition"></a></dt>
<dd><p>Compute how the STFT should be padded, based on match_stride.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_length</strong> (<em>int</em>) – Window length of STFT.</p></li>
<li><p><strong>hop_length</strong> (<em>int</em>) – Hop length of STFT.</p></li>
<li><p><strong>match_stride</strong> (<em>bool</em>) – Whether or not to match stride, making the STFT have the same alignment as
convolutional layers.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Amount to pad on either side of audio.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.copy" title="Permalink to this definition"></a></dt>
<dd><p>Shallow copy of signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Shallow copy of the audio signal.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.cpu">
<span class="sig-name descname"><span class="pre">cpu</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.cpu"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.cpu" title="Permalink to this definition"></a></dt>
<dd><p>Moves AudioSignal to cpu.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.cuda">
<span class="sig-name descname"><span class="pre">cuda</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.cuda"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.cuda" title="Permalink to this definition"></a></dt>
<dd><p>Moves AudioSignal to cuda.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.deepcopy">
<span class="sig-name descname"><span class="pre">deepcopy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.deepcopy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.deepcopy" title="Permalink to this definition"></a></dt>
<dd><p>Copies the signal and all of its attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Deep copy of the audio signal.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.detach">
<span class="sig-name descname"><span class="pre">detach</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.detach"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.detach" title="Permalink to this definition"></a></dt>
<dd><p>Detaches tensors contained in AudioSignal.</p>
<p>Relevant attributes are the stft data, the audio data,
and the loudness of the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Same signal, but with all tensors detached.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.device">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">device</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.device" title="Permalink to this definition"></a></dt>
<dd><p>Get device that AudioSignal is on.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Device that AudioSignal is on.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>torch.device</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.duration">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">duration</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.duration" title="Permalink to this definition"></a></dt>
<dd><p>Length of audio signal in seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Length of signal in seconds.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.excerpt">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">excerpt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Path</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">RandomState</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.excerpt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.excerpt" title="Permalink to this definition"></a></dt>
<dd><p>Randomly draw an excerpt of <code class="docutils literal notranslate"><span class="pre">duration</span></code> seconds from an
audio file specified at <code class="docutils literal notranslate"><span class="pre">audio_path</span></code>, between <code class="docutils literal notranslate"><span class="pre">offset</span></code> seconds
and end of file. <code class="docutils literal notranslate"><span class="pre">state</span></code> can be used to seed the random draw.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio_path</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>Path</em><em>]</em>) – Path to audio file to grab excerpt from.</p></li>
<li><p><strong>offset</strong> (<em>float</em><em>, </em><em>optional</em>) – Lower bound for the start time, in seconds drawn from
the file, by default None.</p></li>
<li><p><strong>duration</strong> (<em>float</em><em>, </em><em>optional</em>) – Duration of excerpt, in seconds, by default None</p></li>
<li><p><strong>state</strong> (<em>Union</em><em>[</em><em>np.random.RandomState</em><em>, </em><em>int</em><em>]</em><em>, </em><em>optional</em>) – RandomState or seed of random state, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal containing excerpt.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="o">.</span><span class="n">excerpt</span><span class="p">(</span><span class="s2">&quot;path/to/audio&quot;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.float">
<span class="sig-name descname"><span class="pre">float</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.float"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.float" title="Permalink to this definition"></a></dt>
<dd><p>Calls <code class="docutils literal notranslate"><span class="pre">.float()</span></code> on <code class="docutils literal notranslate"><span class="pre">self.audio_data</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.get_dct">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_dct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_mfcc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_mels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'ortho'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.get_dct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.get_dct" title="Permalink to this definition"></a></dt>
<dd><p>Create a discrete cosine transform (DCT) transformation matrix with shape (<code class="docutils literal notranslate"><span class="pre">n_mels</span></code>, <code class="docutils literal notranslate"><span class="pre">n_mfcc</span></code>),
it can be normalized depending on norm. For more information about dct:
<a class="reference external" href="http://en.wikipedia.org/wiki/Discrete_cosine_transform#DCT-II">http://en.wikipedia.org/wiki/Discrete_cosine_transform#DCT-II</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_mfcc</strong> (<em>int</em>) – Number of mfccs</p></li>
<li><p><strong>n_mels</strong> (<em>int</em>) – Number of mels</p></li>
<li><p><strong>norm</strong> (<em>str</em>) – Use “ortho” to get a orthogonal matrix or None, by default “ortho”</p></li>
<li><p><strong>device</strong> (<em>str</em><em>, </em><em>optional</em>) – Device to load the transformation matrix on, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The dct transformation matrix.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor [shape=(n_mels, n_mfcc)] T</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.get_mel_filters">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_mel_filters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_fft</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_mels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.get_mel_filters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.get_mel_filters" title="Permalink to this definition"></a></dt>
<dd><p>Create a Filterbank matrix to combine FFT bins into Mel-frequency bins.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sr</strong> (<em>int</em>) – Sample rate of audio</p></li>
<li><p><strong>n_fft</strong> (<em>int</em>) – Number of FFT bins</p></li>
<li><p><strong>n_mels</strong> (<em>int</em>) – Number of mels</p></li>
<li><p><strong>fmin</strong> (<em>float</em><em>, </em><em>optional</em>) – Lowest frequency, in Hz, by default 0.0</p></li>
<li><p><strong>fmax</strong> (<em>float</em><em>, </em><em>optional</em>) – Highest frequency, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Mel transform matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray [shape=(n_mels, 1 + n_fft/2)]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.get_window">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.get_window"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.get_window" title="Permalink to this definition"></a></dt>
<dd><p>Wrapper around scipy.signal.get_window so one can also get the
popular sqrt-hann window. This function caches for efficiency
using functools.lru_cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_type</strong> (<em>str</em>) – Type of window to get</p></li>
<li><p><strong>window_length</strong> (<em>int</em>) – Length of the window</p></li>
<li><p><strong>device</strong> (<em>str</em>) – Device to put window onto.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Window returned by scipy.signal.get_window, as a tensor.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.hash">
<span class="sig-name descname"><span class="pre">hash</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.hash" title="Permalink to this definition"></a></dt>
<dd><p>Writes the audio data to a temporary file, and then
hashes it using hashlib. Useful for creating a file
name based on the audio content.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Hash of audio data.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Creating a signal, and writing it to a unique file name:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hash</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">hash</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">hash</span><span class="si">}</span><span class="s2">.wav&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.istft">
<span class="sig-name descname"><span class="pre">istft</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_stride</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.istft"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.istft" title="Permalink to this definition"></a></dt>
<dd><p>Computes inverse STFT and sets it to audio_data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Window length of STFT, by default <code class="docutils literal notranslate"><span class="pre">0.032</span> <span class="pre">*</span> <span class="pre">self.sample_rate</span></code>.</p></li>
<li><p><strong>hop_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Hop length of STFT, by default <code class="docutils literal notranslate"><span class="pre">window_length</span> <span class="pre">//</span> <span class="pre">4</span></code>.</p></li>
<li><p><strong>window_type</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of window to use, by default <code class="docutils literal notranslate"><span class="pre">sqrt\_hann</span></code>.</p></li>
<li><p><strong>match_stride</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to match the stride of convolutional layers, by default False</p></li>
<li><p><strong>length</strong> (<em>int</em><em>, </em><em>optional</em>) – Original length of signal, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal with istft applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>RuntimeError</strong> – Raises an error if stft was not called prior to istft on the signal,
    or if stft_data is not set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.length">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">length</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.length" title="Permalink to this definition"></a></dt>
<dd><p>Length of audio signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Length of signal in samples.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.load_from_array">
<span class="sig-name descname"><span class="pre">load_from_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.load_from_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.load_from_array" title="Permalink to this definition"></a></dt>
<dd><p>Loads data from array, reshaping it to be exactly 3
dimensions. Used internally when AudioSignal is called
with a tensor or an array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio_array</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>]</em>) – Array/tensor of audio of samples.</p></li>
<li><p><strong>sample_rate</strong> (<em>int</em>) – Sample rate of audio</p></li>
<li><p><strong>device</strong> (<em>str</em><em>, </em><em>optional</em>) – Device to move audio onto, by default “cpu”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal loaded from array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.load_from_file">
<span class="sig-name descname"><span class="pre">load_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Path</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.load_from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.load_from_file" title="Permalink to this definition"></a></dt>
<dd><p>Loads data from file. Used internally when AudioSignal
is instantiated with a path to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio_path</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>Path</em><em>]</em>) – Path to file</p></li>
<li><p><strong>offset</strong> (<em>float</em>) – Offset in seconds</p></li>
<li><p><strong>duration</strong> (<em>float</em>) – Duration in seconds</p></li>
<li><p><strong>device</strong> (<em>str</em><em>, </em><em>optional</em>) – Device to put AudioSignal on, by default “cpu”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal loaded from file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.log_magnitude">
<span class="sig-name descname"><span class="pre">log_magnitude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">80.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.log_magnitude"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.log_magnitude" title="Permalink to this definition"></a></dt>
<dd><p>Computes the log-magnitude of the spectrogram.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ref_value</strong> (<em>float</em><em>, </em><em>optional</em>) – The magnitude is scaled relative to <code class="docutils literal notranslate"><span class="pre">ref</span></code>: <code class="docutils literal notranslate"><span class="pre">20</span> <span class="pre">*</span> <span class="pre">log10(S</span> <span class="pre">/</span> <span class="pre">ref)</span></code>.
Zeros in the output correspond to positions where <code class="docutils literal notranslate"><span class="pre">S</span> <span class="pre">==</span> <span class="pre">ref</span></code>,
by default 1.0</p></li>
<li><p><strong>amin</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum threshold for <code class="docutils literal notranslate"><span class="pre">S</span></code> and <code class="docutils literal notranslate"><span class="pre">ref</span></code>, by default 1e-5</p></li>
<li><p><strong>top_db</strong> (<em>float</em><em>, </em><em>optional</em>) – Threshold the output at <code class="docutils literal notranslate"><span class="pre">top_db</span></code> below the peak:
<code class="docutils literal notranslate"><span class="pre">max(10</span> <span class="pre">*</span> <span class="pre">log10(S/ref))</span> <span class="pre">-</span> <span class="pre">top_db</span></code>, by default -80.0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Log-magnitude spectrogram</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.magnitude">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">magnitude</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.magnitude" title="Permalink to this definition"></a></dt>
<dd><p>Computes and returns the absolute value of the STFT, which
is the magnitude. This value can also be set to some tensor.
When set, <code class="docutils literal notranslate"><span class="pre">self.stft_data</span></code> is manipulated so that its magnitude
matches what this is set to, and modulated by the phase.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Magnitude of STFT.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>torch.Tensor</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">magnitude</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">magnitude</span> <span class="c1"># Computes stft if not computed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">magnitude</span><span class="p">[</span><span class="n">magnitude</span> <span class="o">&lt;</span> <span class="n">magnitude</span><span class="o">.</span><span class="n">mean</span><span class="p">()]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">magnitude</span> <span class="o">=</span> <span class="n">magnitude</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">istft</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.markdown">
<span class="sig-name descname"><span class="pre">markdown</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.markdown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.markdown" title="Permalink to this definition"></a></dt>
<dd><p>Produces a markdown representation of AudioSignal, in a markdown table.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Markdown representation of AudioSignal.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">markdown</span><span class="p">())</span>
<span class="go">| Key | Value</span>
<span class="go">|---|---</span>
<span class="go">| duration | 1.000 seconds |</span>
<span class="go">| batch_size | 1 |</span>
<span class="go">| path | path unknown |</span>
<span class="go">| sample_rate | 44100 |</span>
<span class="go">| num_channels | 1 |</span>
<span class="go">| audio_data.shape | torch.Size([1, 1, 44100]) |</span>
<span class="go">| stft_params | STFTParams(window_length=2048, hop_length=512, window_type=&#39;sqrt_hann&#39;, match_stride=False) |</span>
<span class="go">| device | cpu |</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.mel_spectrogram">
<span class="sig-name descname"><span class="pre">mel_spectrogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_mels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">80</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mel_fmin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mel_fmax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.mel_spectrogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.mel_spectrogram" title="Permalink to this definition"></a></dt>
<dd><p>Computes a Mel spectrogram.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_mels</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of mels, by default 80</p></li>
<li><p><strong>mel_fmin</strong> (<em>float</em><em>, </em><em>optional</em>) – Lowest frequency, in Hz, by default 0.0</p></li>
<li><p><strong>mel_fmax</strong> (<em>float</em><em>, </em><em>optional</em>) – Highest frequency, by default None</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to self.stft().</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Mel spectrogram.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor [shape=(batch, channels, mels, time)]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.mfcc">
<span class="sig-name descname"><span class="pre">mfcc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_mfcc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_mels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">80</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.mfcc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.mfcc" title="Permalink to this definition"></a></dt>
<dd><p>Computes mel-frequency cepstral coefficients (MFCCs).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_mfcc</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of mels, by default 40</p></li>
<li><p><strong>n_mels</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of mels, by default 80</p></li>
<li><p><strong>log_offset</strong> (<em>float</em><em>, </em><em>optional</em>) – Small value to prevent numerical issues when trying to compute log(0), by default 1e-6</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to self.mel_spectrogram(), note that some of them will be used for self.stft()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MFCCs.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor [shape=(batch, channels, mfccs, time)]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.num_channels">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_channels</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.num_channels" title="Permalink to this definition"></a></dt>
<dd><p>Number of audio channels.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Number of audio channels.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.numpy">
<span class="sig-name descname"><span class="pre">numpy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.numpy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.numpy" title="Permalink to this definition"></a></dt>
<dd><p>Detaches <code class="docutils literal notranslate"><span class="pre">self.audio_data</span></code>, moves to cpu, and converts to numpy.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Audio data as a numpy array.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.path_to_input_file">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path_to_input_file</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.path_to_input_file" title="Permalink to this definition"></a></dt>
<dd><p>Path to input file, if it exists.
Alias to <code class="docutils literal notranslate"><span class="pre">path_to_file</span></code> for backwards compatibility</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.phase">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">phase</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.phase" title="Permalink to this definition"></a></dt>
<dd><p>Computes and returns the phase of the STFT.
This value can also be set to some tensor.
When set, <code class="docutils literal notranslate"><span class="pre">self.stft_data</span></code> is manipulated so that its phase
matches what this is set to, we original magnitudeith th.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Phase of STFT.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>torch.Tensor</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">phase</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">phase</span> <span class="c1"># Computes stft if not computed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">phase</span><span class="p">[</span><span class="n">phase</span> <span class="o">&lt;</span> <span class="n">phase</span><span class="o">.</span><span class="n">mean</span><span class="p">()]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">istft</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.resample">
<span class="sig-name descname"><span class="pre">resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.resample" title="Permalink to this definition"></a></dt>
<dd><p>Resamples the audio, using sinc interpolation. This works on both
cpu and gpu, and is much faster on gpu.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sample_rate</strong> (<em>int</em>) – Sample rate to resample to.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Resampled AudioSignal</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.salient_excerpt">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">salient_excerpt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Path</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loudness_cutoff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">RandomState</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.salient_excerpt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.salient_excerpt" title="Permalink to this definition"></a></dt>
<dd><p>Similar to AudioSignal.excerpt, except it extracts excerpts only
if they are above a specified loudness threshold, which is computed via
a fast LUFS routine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio_path</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>Path</em><em>]</em>) – Path to audio file to grab excerpt from.</p></li>
<li><p><strong>loudness_cutoff</strong> (<em>float</em><em>, </em><em>optional</em>) – Loudness threshold in dB. Typical values are <code class="docutils literal notranslate"><span class="pre">-40,</span> <span class="pre">-60</span></code>,
etc, by default None</p></li>
<li><p><strong>num_tries</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of tries to grab an excerpt above the threshold
before giving up, by default 8.</p></li>
<li><p><strong>state</strong> (<em>Union</em><em>[</em><em>np.random.RandomState</em><em>, </em><em>int</em><em>]</em><em>, </em><em>optional</em>) – RandomState or seed of random state, by default None</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – Keyword arguments to AudioSignal.excerpt</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal containing excerpt.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>if <code class="docutils literal notranslate"><span class="pre">num_tries</span></code> is set to None, <code class="docutils literal notranslate"><span class="pre">salient_excerpt</span></code> may try forever, which can
result in an infinite loop if <code class="docutils literal notranslate"><span class="pre">audio_path</span></code> does not have
any loud enough excerpts.</p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="o">.</span><span class="n">salient_excerpt</span><span class="p">(</span>
<span class="go">        &quot;path/to/audio&quot;,</span>
<span class="go">        loudness_cutoff=-40,</span>
<span class="go">        duration=5</span>
<span class="go">    )</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.samples">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">samples</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.samples" title="Permalink to this definition"></a></dt>
<dd><p>Returns the audio data tensor in the object.</p>
<p>Audio data is always of the shape
(batch_size, num_channels, num_samples). If value has less
than 3 dims (e.g. is (num_channels, num_samples)), then it will
be reshaped to (1, num_channels, num_samples) - a batch size of 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>]</em>) – Audio data to set.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Audio samples.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.shape">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shape</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.shape" title="Permalink to this definition"></a></dt>
<dd><p>Shape of audio data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Shape of audio data.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.signal_duration">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">signal_duration</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.signal_duration" title="Permalink to this definition"></a></dt>
<dd><p>Length of audio signal in seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Length of signal in seconds.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.signal_length">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">signal_length</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.signal_length" title="Permalink to this definition"></a></dt>
<dd><p>Length of audio signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Length of signal in samples.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.stft">
<span class="sig-name descname"><span class="pre">stft</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_stride</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.stft"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.stft" title="Permalink to this definition"></a></dt>
<dd><p>Computes the short-time Fourier transform of the audio data,
with specified STFT parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Window length of STFT, by default <code class="docutils literal notranslate"><span class="pre">0.032</span> <span class="pre">*</span> <span class="pre">self.sample_rate</span></code>.</p></li>
<li><p><strong>hop_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Hop length of STFT, by default <code class="docutils literal notranslate"><span class="pre">window_length</span> <span class="pre">//</span> <span class="pre">4</span></code>.</p></li>
<li><p><strong>window_type</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of window to use, by default <code class="docutils literal notranslate"><span class="pre">sqrt\_hann</span></code>.</p></li>
<li><p><strong>match_stride</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to match the stride of convolutional layers, by default False</p></li>
<li><p><strong>padding_type</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of padding to use, by default ‘reflect’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>STFT of audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Compute the STFT of an AudioSignal:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">stft</span><span class="p">()</span>
</pre></div>
</div>
<p>Vary the window and hop length:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stft_params</span> <span class="o">=</span> <span class="p">[</span><span class="n">STFTParams</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span> <span class="n">STFTParams</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">128</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">stft_param</span> <span class="ow">in</span> <span class="n">stft_params</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">signal</span><span class="o">.</span><span class="n">stft_params</span> <span class="o">=</span> <span class="n">stft_params</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">signal</span><span class="o">.</span><span class="n">stft</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.stft_data">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stft_data</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.stft_data" title="Permalink to this definition"></a></dt>
<dd><p>Returns the STFT data inside the signal. Shape is
(batch, channels, frequencies, time).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Complex spectrogram data.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.stft_params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stft_params</span></span><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.stft_params" title="Permalink to this definition"></a></dt>
<dd><p>Returns STFTParams object, which can be re-used to other
AudioSignals.</p>
<p>This property can be set as well. If values are not defined in STFTParams,
they are inferred automatically from the signal properties. The default is to use
32ms windows, with 8ms hop length, and the square root of the hann window.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>STFT parameters for the AudioSignal.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#audiotools.core.audio_signal.STFTParams" title="audiotools.core.audio_signal.STFTParams">STFTParams</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stft_params</span> <span class="o">=</span> <span class="n">STFTParams</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal1</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">,</span> <span class="n">stft_params</span><span class="o">=</span><span class="n">stft_params</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal2</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">,</span> <span class="n">stft_params</span><span class="o">=</span><span class="n">signal1</span><span class="o">.</span><span class="n">stft_params</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal1</span><span class="o">.</span><span class="n">stft_params</span> <span class="o">=</span> <span class="n">STFTParams</span><span class="p">()</span> <span class="c1"># Defaults</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.to">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.to" title="Permalink to this definition"></a></dt>
<dd><p>Moves all tensors contained in signal to the specified device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>device</strong> (<em>str</em>) – Device to move AudioSignal onto. Typical values are
“cuda”, “cpu”, or “cuda:n” to specify the nth gpu.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal with all tensors moved to specified device.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.to_mono">
<span class="sig-name descname"><span class="pre">to_mono</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.to_mono"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.to_mono" title="Permalink to this definition"></a></dt>
<dd><p>Converts audio data to mono audio, by taking the mean
along the channels dimension.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>AudioSignal with mean of channels.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.trim">
<span class="sig-name descname"><span class="pre">trim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.trim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.trim" title="Permalink to this definition"></a></dt>
<dd><p>Trims the audio_data tensor before and after.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>before</strong> (<em>int</em>) – How many samples to trim from beginning.</p></li>
<li><p><strong>after</strong> (<em>int</em>) – How many samples to trim from end.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal with trimming applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.truncate_samples">
<span class="sig-name descname"><span class="pre">truncate_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length_in_samples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.truncate_samples"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.truncate_samples" title="Permalink to this definition"></a></dt>
<dd><p>Truncate signal to specified length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>length_in_samples</strong> (<em>int</em>) – Truncate to this many samples.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal with truncation applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.wave">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wave</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_channels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sine'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.wave"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.wave" title="Permalink to this definition"></a></dt>
<dd><p>Generate a waveform of a given frequency and shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frequency</strong> (<em>float</em>) – Frequency of the waveform</p></li>
<li><p><strong>duration</strong> (<em>float</em>) – Duration of the waveform</p></li>
<li><p><strong>sample_rate</strong> (<em>int</em>) – Sample rate of the waveform</p></li>
<li><p><strong>num_channels</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of channels, by default 1</p></li>
<li><p><strong>shape</strong> (<em>str</em><em>, </em><em>optional</em>) – Shape of the waveform, by default “saw”
One of “sawtooth”, “square”, “sine”, “triangle”</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – Keyword arguments to AudioSignal</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Path</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.write" title="Permalink to this definition"></a></dt>
<dd><p>Writes audio to a file. Only writes the audio
that is in the very first item of the batch. To write other items
in the batch, index the signal along the batch dimension
before writing. After writing, the signal’s <code class="docutils literal notranslate"><span class="pre">path_to_file</span></code>
attribute is updated to the new path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>audio_path</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>Path</em><em>]</em>) – Path to write audio to.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns original AudioSignal, so you can use this in a fluent
interface.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Creating and writing a signal to disk:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">44100</span><span class="p">),</span> <span class="mi">44100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/tmp/out.wav&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Writing a different element of the batch:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/tmp/out.wav&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using this in a fluent interface:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/tmp/original.wav&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">low_pass</span><span class="p">(</span><span class="mi">4000</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/tmp/lowpass.wav&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.zero_pad">
<span class="sig-name descname"><span class="pre">zero_pad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.zero_pad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.zero_pad" title="Permalink to this definition"></a></dt>
<dd><p>Zero pads the audio_data tensor before and after.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>before</strong> (<em>int</em>) – How many zeros to prepend to audio.</p></li>
<li><p><strong>after</strong> (<em>int</em>) – How many zeros to append to audio.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal with padding applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.zero_pad_to">
<span class="sig-name descname"><span class="pre">zero_pad_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'after'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.zero_pad_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.zero_pad_to" title="Permalink to this definition"></a></dt>
<dd><p>Pad with zeros to a specified length, either before or after
the audio data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>length</strong> (<em>int</em>) – Length to pad to</p></li>
<li><p><strong>mode</strong> (<em>str</em><em>, </em><em>optional</em>) – Whether to prepend or append zeros to signal, by default “after”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal with padding applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.AudioSignal.zeros">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">zeros</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_channels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/audio_signal.html#AudioSignal.zeros"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.audio_signal.AudioSignal.zeros" title="Permalink to this definition"></a></dt>
<dd><p>Helper function create an AudioSignal of all zeros.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>duration</strong> (<em>float</em>) – Duration of AudioSignal</p></li>
<li><p><strong>sample_rate</strong> (<em>int</em>) – Sample rate of AudioSignal</p></li>
<li><p><strong>num_channels</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of channels, by default 1</p></li>
<li><p><strong>batch_size</strong> (<em>int</em><em>, </em><em>optional</em>) – Batch size, by default 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal containing all zeros.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Generate 5 seconds of all zeros at a sample rate of 44100.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">AudioSignal</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mi">44100</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.STFTParams">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.audio_signal.</span></span><span class="sig-name descname"><span class="pre">STFTParams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_stride</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#audiotools.core.audio_signal.STFTParams" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<p>STFTParams object is a container that holds STFT parameters - window_length,
hop_length, and window_type. Not all parameters need to be specified. Ones that
are not specified will be inferred by the AudioSignal parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Window length of STFT, by default <code class="docutils literal notranslate"><span class="pre">0.032</span> <span class="pre">*</span> <span class="pre">self.sample_rate</span></code>.</p></li>
<li><p><strong>hop_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Hop length of STFT, by default <code class="docutils literal notranslate"><span class="pre">window_length</span> <span class="pre">//</span> <span class="pre">4</span></code>.</p></li>
<li><p><strong>window_type</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of window to use, by default <code class="docutils literal notranslate"><span class="pre">sqrt\_hann</span></code>.</p></li>
<li><p><strong>match_stride</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to match the stride of convolutional layers, by default False</p></li>
<li><p><strong>padding_type</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of padding to use, by default ‘reflect’</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.STFTParams.hop_length">
<span class="sig-name descname"><span class="pre">hop_length</span></span><a class="headerlink" href="#audiotools.core.audio_signal.STFTParams.hop_length" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.STFTParams.match_stride">
<span class="sig-name descname"><span class="pre">match_stride</span></span><a class="headerlink" href="#audiotools.core.audio_signal.STFTParams.match_stride" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.STFTParams.padding_type">
<span class="sig-name descname"><span class="pre">padding_type</span></span><a class="headerlink" href="#audiotools.core.audio_signal.STFTParams.padding_type" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.STFTParams.window_length">
<span class="sig-name descname"><span class="pre">window_length</span></span><a class="headerlink" href="#audiotools.core.audio_signal.STFTParams.window_length" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.audio_signal.STFTParams.window_type">
<span class="sig-name descname"><span class="pre">window_type</span></span><a class="headerlink" href="#audiotools.core.audio_signal.STFTParams.window_type" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-audiotools.core.display">
<span id="displaying-and-visualizing"></span><h2>Displaying and visualizing<a class="headerlink" href="#module-audiotools.core.display" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.display.DisplayMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.display.</span></span><span class="sig-name descname"><span class="pre">DisplayMixin</span></span><a class="reference internal" href="../_modules/audiotools/core/display.html#DisplayMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.display.DisplayMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.display.DisplayMixin.save_image">
<span class="sig-name descname"><span class="pre">save_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'specshow'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/display.html#DisplayMixin.save_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.display.DisplayMixin.save_image" title="Permalink to this definition"></a></dt>
<dd><p>Save AudioSignal spectrogram (or whatever <code class="docutils literal notranslate"><span class="pre">plot_fn</span></code> is set to) to
a specified file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_path</strong> (<em>str</em>) – Where to save the file to.</p></li>
<li><p><strong>plot_fn</strong> (<em>Union</em><em>[</em><em>Callable</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – How to create the image. Set to <code class="docutils literal notranslate"><span class="pre">None</span></code> to avoid plotting, by default “specshow”</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to <a class="reference internal" href="#audiotools.core.display.DisplayMixin.specshow" title="audiotools.core.display.DisplayMixin.specshow"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.display.DisplayMixin.specshow()</span></code></a> or
whatever <code class="docutils literal notranslate"><span class="pre">plot_fn</span></code> is set to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.display.DisplayMixin.specshow">
<span class="sig-name descname"><span class="pre">specshow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">preemphasis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'time'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_mels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/display.html#DisplayMixin.specshow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.display.DisplayMixin.specshow" title="Permalink to this definition"></a></dt>
<dd><p>Displays a spectrogram, using <code class="docutils literal notranslate"><span class="pre">librosa.display.specshow</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>preemphasis</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether or not to apply preemphasis, which makes high
frequency detail easier to see, by default False</p></li>
<li><p><strong>x_axis</strong> (<em>str</em><em>, </em><em>optional</em>) – How to label the x axis, by default “time”</p></li>
<li><p><strong>y_axis</strong> (<em>str</em><em>, </em><em>optional</em>) – How to label the y axis, by default “linear”</p></li>
<li><p><strong>n_mels</strong> (<em>int</em><em>, </em><em>optional</em>) – If displaying a mel spectrogram with <code class="docutils literal notranslate"><span class="pre">y_axis</span> <span class="pre">=</span> <span class="pre">&quot;mel&quot;</span></code>,
this controls the number of mels, by default 128.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to <a class="reference internal" href="#audiotools.core.util.format_figure" title="audiotools.core.util.format_figure"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.util.format_figure()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.display.DisplayMixin.waveplot">
<span class="sig-name descname"><span class="pre">waveplot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'time'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/display.html#DisplayMixin.waveplot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.display.DisplayMixin.waveplot" title="Permalink to this definition"></a></dt>
<dd><p>Displays a waveform plot, using <code class="docutils literal notranslate"><span class="pre">librosa.display.waveshow</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x_axis</strong> (<em>str</em><em>, </em><em>optional</em>) – How to label the x axis, by default “time”</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to <a class="reference internal" href="#audiotools.core.util.format_figure" title="audiotools.core.util.format_figure"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.util.format_figure()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.display.DisplayMixin.wavespec">
<span class="sig-name descname"><span class="pre">wavespec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'time'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/display.html#DisplayMixin.wavespec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.display.DisplayMixin.wavespec" title="Permalink to this definition"></a></dt>
<dd><p>Displays a waveform plot, using <code class="docutils literal notranslate"><span class="pre">librosa.display.waveshow</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x_axis</strong> (<em>str</em><em>, </em><em>optional</em>) – How to label the x axis, by default “time”</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to <a class="reference internal" href="#audiotools.core.display.DisplayMixin.specshow" title="audiotools.core.display.DisplayMixin.specshow"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.display.DisplayMixin.specshow()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.display.DisplayMixin.write_audio_to_tb">
<span class="sig-name descname"><span class="pre">write_audio_to_tb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">writer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'specshow'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/display.html#DisplayMixin.write_audio_to_tb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.display.DisplayMixin.write_audio_to_tb" title="Permalink to this definition"></a></dt>
<dd><p>Writes a signal and its spectrogram to Tensorboard. Will show up
under the Audio and Images tab in Tensorboard.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<em>str</em>) – Tag to write signal to (e.g. <code class="docutils literal notranslate"><span class="pre">clean/sample_0.wav</span></code>). The image will be
written to the corresponding <code class="docutils literal notranslate"><span class="pre">.png</span></code> file (e.g. <code class="docutils literal notranslate"><span class="pre">clean/sample_0.png</span></code>).</p></li>
<li><p><strong>writer</strong> (<em>SummaryWriter</em>) – A SummaryWriter object from PyTorch library.</p></li>
<li><p><strong>step</strong> (<em>int</em><em>, </em><em>optional</em>) – The step to write the signal to, by default None</p></li>
<li><p><strong>plot_fn</strong> (<em>Union</em><em>[</em><em>Callable</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – How to create the image. Set to <code class="docutils literal notranslate"><span class="pre">None</span></code> to avoid plotting, by default “specshow”</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to <a class="reference internal" href="#audiotools.core.display.DisplayMixin.specshow" title="audiotools.core.display.DisplayMixin.specshow"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.display.DisplayMixin.specshow()</span></code></a> or
whatever <code class="docutils literal notranslate"><span class="pre">plot_fn</span></code> is set to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.display.format_figure">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.display.</span></span><span class="sig-name descname"><span class="pre">format_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/display.html#format_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.display.format_figure" title="Permalink to this definition"></a></dt>
<dd><p>Decorator for formatting figures produced by the code below.
See <a class="reference internal" href="#audiotools.core.util.format_figure" title="audiotools.core.util.format_figure"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.util.format_figure()</span></code></a> for more.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em>) – Plotting function that is decorated by this function.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-audiotools.core.dsp">
<span id="digital-signal-processing"></span><h2>Digital signal processing<a class="headerlink" href="#module-audiotools.core.dsp" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.dsp.</span></span><span class="sig-name descname"><span class="pre">DSPMixin</span></span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.collect_windows">
<span class="sig-name descname"><span class="pre">collect_windows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preprocess</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.collect_windows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.collect_windows" title="Permalink to this definition"></a></dt>
<dd><p>Reshapes signal into windows of specified duration from signal with a specified
hop length. Window are placed along the batch dimension. Use with
<a class="reference internal" href="#audiotools.core.dsp.DSPMixin.overlap_and_add" title="audiotools.core.dsp.DSPMixin.overlap_and_add"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.dsp.DSPMixin.overlap_and_add()</span></code></a> to reconstruct the
original signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_duration</strong> (<em>float</em>) – Duration of every window in seconds.</p></li>
<li><p><strong>hop_duration</strong> (<em>float</em>) – Hop between windows in seconds.</p></li>
<li><p><strong>preprocess</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to preprocess the signal, so that the first sample is in
the middle of the first window, by default True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal unfolded with shape <code class="docutils literal notranslate"><span class="pre">(nb</span> <span class="pre">*</span> <span class="pre">nch</span> <span class="pre">*</span> <span class="pre">num_windows,</span> <span class="pre">1,</span> <span class="pre">window_length)</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.corrupt_phase">
<span class="sig-name descname"><span class="pre">corrupt_phase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.corrupt_phase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.corrupt_phase" title="Permalink to this definition"></a></dt>
<dd><p>Corrupts the phase randomly by some scaled value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>scale</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Standard deviation of noise to add to the phase.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal with <code class="docutils literal notranslate"><span class="pre">stft_data</span></code> manipulated. Apply <code class="docutils literal notranslate"><span class="pre">.istft()</span></code> to get the
masked audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.high_pass">
<span class="sig-name descname"><span class="pre">high_pass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cutoffs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zeros</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">51</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.high_pass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.high_pass" title="Permalink to this definition"></a></dt>
<dd><p>High-passes the signal in-place. Each item in the batch
can have a different high-pass cutoff, if the input
to this signal is an array or tensor. If a float, all
items are given the same high-pass filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cutoffs</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Cutoff in Hz of high-pass filter.</p></li>
<li><p><strong>zeros</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of taps to use in high-pass filter, by default 51</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>High-passed AudioSignal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.low_pass">
<span class="sig-name descname"><span class="pre">low_pass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cutoffs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zeros</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">51</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.low_pass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.low_pass" title="Permalink to this definition"></a></dt>
<dd><p>Low-passes the signal in-place. Each item in the batch
can have a different low-pass cutoff, if the input
to this signal is an array or tensor. If a float, all
items are given the same low-pass filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cutoffs</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Cutoff in Hz of low-pass filter.</p></li>
<li><p><strong>zeros</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of taps to use in low-pass filter, by default 51</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Low-passed AudioSignal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.mask_frequencies">
<span class="sig-name descname"><span class="pre">mask_frequencies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmin_hz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmax_hz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.mask_frequencies"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.mask_frequencies" title="Permalink to this definition"></a></dt>
<dd><p>Masks frequencies between <code class="docutils literal notranslate"><span class="pre">fmin_hz</span></code> and <code class="docutils literal notranslate"><span class="pre">fmax_hz</span></code>, and fills them
with the value specified by <code class="docutils literal notranslate"><span class="pre">val</span></code>. Useful for implementing SpecAug.
The min and max can be different for every item in the batch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fmin_hz</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Lower end of band to mask out.</p></li>
<li><p><strong>fmax_hz</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Upper end of band to mask out.</p></li>
<li><p><strong>val</strong> (<em>float</em><em>, </em><em>optional</em>) – Value to fill in, by default 0.0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal with <code class="docutils literal notranslate"><span class="pre">stft_data</span></code> manipulated. Apply <code class="docutils literal notranslate"><span class="pre">.istft()</span></code> to get the
masked audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.mask_low_magnitudes">
<span class="sig-name descname"><span class="pre">mask_low_magnitudes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_cutoff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.mask_low_magnitudes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.mask_low_magnitudes" title="Permalink to this definition"></a></dt>
<dd><p>Mask away magnitudes below a specified threshold, which
can be different for every item in the batch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_cutoff</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Decibel value for which things below it will be masked away.</p></li>
<li><p><strong>val</strong> (<em>float</em><em>, </em><em>optional</em>) – Value to fill in for masked portions, by default 0.0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal with <code class="docutils literal notranslate"><span class="pre">stft_data</span></code> manipulated. Apply <code class="docutils literal notranslate"><span class="pre">.istft()</span></code> to get the
masked audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.mask_timesteps">
<span class="sig-name descname"><span class="pre">mask_timesteps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tmin_s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmax_s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.mask_timesteps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.mask_timesteps" title="Permalink to this definition"></a></dt>
<dd><p>Masks timesteps between <code class="docutils literal notranslate"><span class="pre">tmin_s</span></code> and <code class="docutils literal notranslate"><span class="pre">tmax_s</span></code>, and fills them
with the value specified by <code class="docutils literal notranslate"><span class="pre">val</span></code>. Useful for implementing SpecAug.
The min and max can be different for every item in the batch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tmin_s</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Lower end of timesteps to mask out.</p></li>
<li><p><strong>tmax_s</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Upper end of timesteps to mask out.</p></li>
<li><p><strong>val</strong> (<em>float</em><em>, </em><em>optional</em>) – Value to fill in, by default 0.0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal with <code class="docutils literal notranslate"><span class="pre">stft_data</span></code> manipulated. Apply <code class="docutils literal notranslate"><span class="pre">.istft()</span></code> to get the
masked audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.overlap_and_add">
<span class="sig-name descname"><span class="pre">overlap_and_add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hop_duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.overlap_and_add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.overlap_and_add" title="Permalink to this definition"></a></dt>
<dd><p>Function which takes a list of windows and overlap adds them into a
signal the same length as <code class="docutils literal notranslate"><span class="pre">audio_signal</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hop_duration</strong> (<em>float</em>) – How much to shift for each window
(overlap is window_duration - hop_duration) in seconds.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>overlap-and-added signal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.preemphasis">
<span class="sig-name descname"><span class="pre">preemphasis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coef</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.85</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.preemphasis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.preemphasis" title="Permalink to this definition"></a></dt>
<dd><p>Applies pre-emphasis to audio signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coef</strong> (<em>float</em><em>, </em><em>optional</em>) – How much pre-emphasis to apply, lower values do less. 0 does nothing.
by default 0.85</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pre-emphasized signal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.shift_phase">
<span class="sig-name descname"><span class="pre">shift_phase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.shift_phase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.shift_phase" title="Permalink to this definition"></a></dt>
<dd><p>Shifts the phase by a constant value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>shift</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – What to shift the phase by.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal with <code class="docutils literal notranslate"><span class="pre">stft_data</span></code> manipulated. Apply <code class="docutils literal notranslate"><span class="pre">.istft()</span></code> to get the
masked audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.dsp.DSPMixin.windows">
<span class="sig-name descname"><span class="pre">windows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preprocess</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/dsp.html#DSPMixin.windows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.dsp.DSPMixin.windows" title="Permalink to this definition"></a></dt>
<dd><p>Generator which yields windows of specified duration from signal with a specified
hop length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_duration</strong> (<em>float</em>) – Duration of every window in seconds.</p></li>
<li><p><strong>hop_duration</strong> (<em>float</em>) – Hop between windows in seconds.</p></li>
<li><p><strong>preprocess</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to preprocess the signal, so that the first sample is in
the middle of the first window, by default True</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>AudioSignal</em> – Each window is returned as an AudioSignal.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-audiotools.core.effects">
<span id="audio-effects"></span><h2>Audio effects<a class="headerlink" href="#module-audiotools.core.effects" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.effects.</span></span><span class="sig-name descname"><span class="pre">EffectMixin</span></span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.CODEC_PRESETS">
<span class="sig-name descname"><span class="pre">CODEC_PRESETS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'8-bit':</span> <span class="pre">{'bits_per_sample':</span> <span class="pre">8,</span> <span class="pre">'encoding':</span> <span class="pre">'ULAW',</span> <span class="pre">'format':</span> <span class="pre">'wav'},</span> <span class="pre">'Amr-nb':</span> <span class="pre">{'format':</span> <span class="pre">'amr-nb'},</span> <span class="pre">'GSM-FR':</span> <span class="pre">{'format':</span> <span class="pre">'gsm'},</span> <span class="pre">'MP3':</span> <span class="pre">{'compression':</span> <span class="pre">-9,</span> <span class="pre">'format':</span> <span class="pre">'mp3'},</span> <span class="pre">'Ogg':</span> <span class="pre">{'compression':</span> <span class="pre">-1,</span> <span class="pre">'format':</span> <span class="pre">'ogg'},</span> <span class="pre">'Vorbis':</span> <span class="pre">{'compression':</span> <span class="pre">-1,</span> <span class="pre">'format':</span> <span class="pre">'vorbis'}}</span></em><a class="headerlink" href="#audiotools.core.effects.EffectMixin.CODEC_PRESETS" title="Permalink to this definition"></a></dt>
<dd><p>Presets for applying codecs via torchaudio.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.GAIN_FACTOR">
<span class="sig-name descname"><span class="pre">GAIN_FACTOR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.11512925464970229</span></em><a class="headerlink" href="#audiotools.core.effects.EffectMixin.GAIN_FACTOR" title="Permalink to this definition"></a></dt>
<dd><p>Gain factor for converting between amplitude and decibels.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.apply_codec">
<span class="sig-name descname"><span class="pre">apply_codec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">preset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'wav'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bits_per_sample</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.apply_codec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.apply_codec" title="Permalink to this definition"></a></dt>
<dd><p>Applies an audio codec to the signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>preset</strong> (<em>str</em><em>, </em><em>optional</em>) – One of the keys in <code class="docutils literal notranslate"><span class="pre">self.CODEC_PRESETS</span></code>, by default None</p></li>
<li><p><strong>format</strong> (<em>str</em><em>, </em><em>optional</em>) – Format for audio codec, by default “wav”</p></li>
<li><p><strong>encoding</strong> (<em>str</em><em>, </em><em>optional</em>) – Encoding to use, by default None</p></li>
<li><p><strong>bits_per_sample</strong> (<em>int</em><em>, </em><em>optional</em>) – How many bits per sample, by default None</p></li>
<li><p><strong>compression</strong> (<em>int</em><em>, </em><em>optional</em>) – Compression amount of codec, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal with codec applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If preset is not in <code class="docutils literal notranslate"><span class="pre">self.CODEC_PRESETS</span></code>, an error
    is thrown.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.apply_ir">
<span class="sig-name descname"><span class="pre">apply_ir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ir_eq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_original_phase</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.apply_ir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.apply_ir" title="Permalink to this definition"></a></dt>
<dd><p>Applies an impulse response to the signal. If ` is`ir_eq``
is specified, the impulse response is equalized before
it is applied, using the given curve.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ir</strong> (<a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal"><em>AudioSignal</em></a>) – Impulse response to convolve with.</p></li>
<li><p><strong>drr</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Direct-to-reverberant ratio that impulse response will be
altered to, if specified, by default None</p></li>
<li><p><strong>ir_eq</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>]</em><em>, </em><em>optional</em>) – Equalization that will be applied to impulse response
if specified, by default None</p></li>
<li><p><strong>use_original_phase</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to use the original phase, instead of the convolved
phase, by default False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal with impulse response applied to it</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.clip_distortion">
<span class="sig-name descname"><span class="pre">clip_distortion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clip_percentile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.clip_distortion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.clip_distortion" title="Permalink to this definition"></a></dt>
<dd><p>Clips the signal at a given percentile. The higher it is,
the lower the threshold for clipping.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>clip_percentile</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Values are between 0.0 to 1.0. Typical values are 0.1 or below.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Audio signal with clipped audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.convolve">
<span class="sig-name descname"><span class="pre">convolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_at_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.convolve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.convolve" title="Permalink to this definition"></a></dt>
<dd><p>Convolves self with other.
This function uses FFTs to do the convolution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal"><em>AudioSignal</em></a>) – Signal to convolve with.</p></li>
<li><p><strong>start_at_max</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to start at the max value of other signal, to
avoid inducing delays, by default True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Convolved signal, in-place.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.ensure_max_of_audio">
<span class="sig-name descname"><span class="pre">ensure_max_of_audio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.ensure_max_of_audio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.ensure_max_of_audio" title="Permalink to this definition"></a></dt>
<dd><p>Ensures that <code class="docutils literal notranslate"><span class="pre">abs(audio_data)</span> <span class="pre">&lt;=</span> <span class="pre">max</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max</strong> (<em>float</em><em>, </em><em>optional</em>) – Max absolute value of signal, by default 1.0</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal with values scaled between -max and max.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.equalizer">
<span class="sig-name descname"><span class="pre">equalizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.equalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.equalizer" title="Permalink to this definition"></a></dt>
<dd><p>Applies a mel-spaced equalizer to the audio signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>db</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>]</em>) – EQ curve to apply.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal with equalization applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.mel_filterbank">
<span class="sig-name descname"><span class="pre">mel_filterbank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_bands</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.mel_filterbank"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.mel_filterbank" title="Permalink to this definition"></a></dt>
<dd><p>Breaks signal into mel bands.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n_bands</strong> (<em>int</em>) – Number of mel bands to use.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Mel-filtered bands, with last axis being the band index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.mix">
<span class="sig-name descname"><span class="pre">mix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other_eq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.mix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.mix" title="Permalink to this definition"></a></dt>
<dd><p>Mixes noise with signal at specified
signal-to-noise ratio. Optionally, the
other signal can be equalized in-place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal"><em>AudioSignal</em></a>) – AudioSignal object to mix with.</p></li>
<li><p><strong>snr</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Signal to noise ratio, by default 10</p></li>
<li><p><strong>other_eq</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>]</em><em>, </em><em>optional</em>) – EQ curve to apply to other signal, if any, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>In-place modification of AudioSignal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.mulaw_quantization">
<span class="sig-name descname"><span class="pre">mulaw_quantization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantization_channels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.mulaw_quantization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.mulaw_quantization" title="Permalink to this definition"></a></dt>
<dd><p>Applies mu-law quantization to the input waveform.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>quantization_channels</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>int</em><em>]</em>) – Number of mu-law spaced quantization channels to quantize
to.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Quantized AudioSignal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.normalize">
<span class="sig-name descname"><span class="pre">normalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-24.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.normalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.normalize" title="Permalink to this definition"></a></dt>
<dd><p>Normalizes the signal’s volume to the specified db, in LUFS.
This is GPU-compatible, making for very fast loudness normalization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>db</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Loudness to normalize to, by default -24.0</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Normalized audio signal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.pitch_shift">
<span class="sig-name descname"><span class="pre">pitch_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_semitones</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.pitch_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.pitch_shift" title="Permalink to this definition"></a></dt>
<dd><p>Pitch shift the signal. All items in the batch
get the same pitch shift.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_semitones</strong> (<em>int</em>) – How many semitones to shift the signal by.</p></li>
<li><p><strong>quick</strong> (<em>bool</em><em>, </em><em>optional</em>) – Using quick pitch shifting, by default True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pitch shifted audio signal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.quantization">
<span class="sig-name descname"><span class="pre">quantization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantization_channels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.quantization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.quantization" title="Permalink to this definition"></a></dt>
<dd><p>Applies quantization to the input waveform.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>quantization_channels</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>int</em><em>]</em>) – Number of evenly spaced quantization channels to quantize
to.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Quantized AudioSignal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.time_stretch">
<span class="sig-name descname"><span class="pre">time_stretch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.time_stretch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.time_stretch" title="Permalink to this definition"></a></dt>
<dd><p>Time stretch the audio signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>factor</strong> (<em>float</em>) – Factor by which to stretch the AudioSignal. Typically
between 0.8 and 1.2.</p></li>
<li><p><strong>quick</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to use quick time stretching, by default True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time-stretched AudioSignal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.EffectMixin.volume_change">
<span class="sig-name descname"><span class="pre">volume_change</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#EffectMixin.volume_change"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.EffectMixin.volume_change" title="Permalink to this definition"></a></dt>
<dd><p>Change volume of signal by some amount, in dB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>db</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Amount to change volume by.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal at new volume.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.effects.ImpulseResponseMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.effects.</span></span><span class="sig-name descname"><span class="pre">ImpulseResponseMixin</span></span><a class="reference internal" href="../_modules/audiotools/core/effects.html#ImpulseResponseMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.ImpulseResponseMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>These functions are generally only used with AudioSignals that are derived
from impulse responses, not other sources like music or speech. These methods
are used to replicate the data augmentation described in [1].</p>
<ol class="arabic simple">
<li><p>Bryan, Nicholas J. “Impulse response data augmentation and deep
neural networks for blind room acoustic parameter estimation.”
ICASSP 2020-2020 IEEE International Conference on Acoustics,
Speech and Signal Processing (ICASSP). IEEE, 2020.</p></li>
</ol>
<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.ImpulseResponseMixin.alter_drr">
<span class="sig-name descname"><span class="pre">alter_drr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">drr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#ImpulseResponseMixin.alter_drr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.ImpulseResponseMixin.alter_drr" title="Permalink to this definition"></a></dt>
<dd><p>Alters the direct-to-reverberant ratio of the impulse response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>drr</strong> (<em>Union</em><em>[</em><em>torch.Tensor</em><em>, </em><em>np.ndarray</em><em>, </em><em>float</em><em>]</em>) – Direct-to-reverberant ratio that impulse response will be
altered to, if specified, by default None</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Altered impulse response.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.ImpulseResponseMixin.decompose_ir">
<span class="sig-name descname"><span class="pre">decompose_ir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#ImpulseResponseMixin.decompose_ir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.ImpulseResponseMixin.decompose_ir" title="Permalink to this definition"></a></dt>
<dd><p>Decomposes an impulse response into early and late
field responses.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.ImpulseResponseMixin.measure_drr">
<span class="sig-name descname"><span class="pre">measure_drr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#ImpulseResponseMixin.measure_drr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.ImpulseResponseMixin.measure_drr" title="Permalink to this definition"></a></dt>
<dd><p>Measures the direct-to-reverberant ratio of the impulse
response.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Direct-to-reverberant ratio</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.effects.ImpulseResponseMixin.solve_alpha">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">solve_alpha</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">early_response</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">late_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_drr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/effects.html#ImpulseResponseMixin.solve_alpha"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.effects.ImpulseResponseMixin.solve_alpha" title="Permalink to this definition"></a></dt>
<dd><p>Used to solve for the alpha value, which is used
to alter the drr.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-audiotools.core.ffmpeg">
<span id="ffmpeg-routines"></span><h2>FFMPEG routines<a class="headerlink" href="#module-audiotools.core.ffmpeg" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.ffmpeg.FFMPEGMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.ffmpeg.</span></span><span class="sig-name descname"><span class="pre">FFMPEGMixin</span></span><a class="reference internal" href="../_modules/audiotools/core/ffmpeg.html#FFMPEGMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.ffmpeg.FFMPEGMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.ffmpeg.FFMPEGMixin.ffmpeg_loudness">
<span class="sig-name descname"><span class="pre">ffmpeg_loudness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/ffmpeg.html#FFMPEGMixin.ffmpeg_loudness"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.ffmpeg.FFMPEGMixin.ffmpeg_loudness" title="Permalink to this definition"></a></dt>
<dd><p>Computes loudness of audio file using FFMPEG.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>quiet</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to show FFMPEG output during computation,
by default True</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Loudness of every item in the batch, computed via
FFMPEG.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.ffmpeg.FFMPEGMixin.ffmpeg_resample">
<span class="sig-name descname"><span class="pre">ffmpeg_resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/ffmpeg.html#FFMPEGMixin.ffmpeg_resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.ffmpeg.FFMPEGMixin.ffmpeg_resample" title="Permalink to this definition"></a></dt>
<dd><p>Resamples AudioSignal using FFMPEG. More memory-efficient
than using julius.resample for long audio files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample_rate</strong> (<em>int</em>) – Sample rate to resample to.</p></li>
<li><p><strong>quiet</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to show FFMPEG output during computation,
by default True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Resampled AudioSignal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.ffmpeg.FFMPEGMixin.load_from_file_with_ffmpeg">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_from_file_with_ffmpeg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/ffmpeg.html#FFMPEGMixin.load_from_file_with_ffmpeg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.ffmpeg.FFMPEGMixin.load_from_file_with_ffmpeg" title="Permalink to this definition"></a></dt>
<dd><p>Loads AudioSignal object after decoding it to a wav file using FFMPEG.
Useful for loading audio that isn’t covered by librosa’s loading mechanism. Also
useful for loading mp3 files, without any offset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio_path</strong> (<em>str</em>) – Path to load AudioSignal from.</p></li>
<li><p><strong>quiet</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to show FFMPEG output during computation,
by default True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AudioSignal loaded from file with FFMPEG.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal" title="audiotools.core.audio_signal.AudioSignal">AudioSignal</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.ffmpeg.ffprobe_offset">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.ffmpeg.</span></span><span class="sig-name descname"><span class="pre">ffprobe_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/ffmpeg.html#ffprobe_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.ffmpeg.ffprobe_offset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.ffmpeg.r128stats">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.ffmpeg.</span></span><span class="sig-name descname"><span class="pre">r128stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/ffmpeg.html#r128stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.ffmpeg.r128stats" title="Permalink to this definition"></a></dt>
<dd><p>Takes a path to an audio file, returns a dict with the loudness
stats computed by the ffmpeg ebur128 filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<em>str</em>) – Path to compute loudness stats on.</p></li>
<li><p><strong>quiet</strong> (<em>bool</em>) – Whether to show FFMPEG output during computation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary containing loudness stats.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-audiotools.core.loudness">
<span id="perceptual-loudness"></span><h2>Perceptual loudness<a class="headerlink" href="#module-audiotools.core.loudness" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.loudness.LoudnessMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.loudness.</span></span><span class="sig-name descname"><span class="pre">LoudnessMixin</span></span><a class="reference internal" href="../_modules/audiotools/core/loudness.html#LoudnessMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.loudness.LoudnessMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.loudness.LoudnessMixin.MIN_LOUDNESS">
<span class="sig-name descname"><span class="pre">MIN_LOUDNESS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-70</span></em><a class="headerlink" href="#audiotools.core.loudness.LoudnessMixin.MIN_LOUDNESS" title="Permalink to this definition"></a></dt>
<dd><p>Minimum loudness possible.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.loudness.LoudnessMixin.loudness">
<span class="sig-name descname"><span class="pre">loudness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'K-weighting'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.4</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/loudness.html#LoudnessMixin.loudness"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.loudness.LoudnessMixin.loudness" title="Permalink to this definition"></a></dt>
<dd><p>Calculates loudness using an implementation of ITU-R BS.1770-4.
Allows control over gating block size and frequency weighting filters for
additional control. Measure the integrated gated loudness of a signal.</p>
<p>API is derived from PyLoudnorm, but this implementation is ported to PyTorch
and is tensorized across batches. When on GPU, an FIR approximation of the IIR
filters is used to compute loudness for speed.</p>
<p>Uses the weighting filters and block size defined by the meter
the integrated loudness is measured based upon the gating algorithm
defined in the ITU-R BS.1770-4 specification.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter_class</strong> (<em>str</em><em>, </em><em>optional</em>) – Class of weighting filter used.
K-weighting’ (default), ‘Fenton/Lee 1’
‘Fenton/Lee 2’, ‘Dash et al.’
by default “K-weighting”</p></li>
<li><p><strong>block_size</strong> (<em>float</em><em>, </em><em>optional</em>) – Gating block size in seconds, by default 0.400</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to <a class="reference internal" href="#audiotools.core.loudness.Meter" title="audiotools.core.loudness.Meter"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.loudness.Meter()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Loudness of audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.loudness.Meter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.loudness.</span></span><span class="sig-name descname"><span class="pre">Meter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'K-weighting'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zeros</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">512</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_fir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/loudness.html#Meter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.loudness.Meter" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code></p>
<p>Tensorized version of pyloudnorm.Meter. Works with batched audio tensors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rate</strong> (<em>int</em>) – Sample rate of audio.</p></li>
<li><p><strong>filter_class</strong> (<em>str</em><em>, </em><em>optional</em>) – Class of weighting filter used.
K-weighting’ (default), ‘Fenton/Lee 1’
‘Fenton/Lee 2’, ‘Dash et al.’
by default “K-weighting”</p></li>
<li><p><strong>block_size</strong> (<em>float</em><em>, </em><em>optional</em>) – Gating block size in seconds, by default 0.400</p></li>
<li><p><strong>zeros</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of zeros to use in FIR approximation of
IIR filters, by default 512</p></li>
<li><p><strong>use_fir</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to use FIR approximation or exact IIR formulation.
If computing on GPU, <code class="docutils literal notranslate"><span class="pre">use_fir=True</span></code> will be used, as its
much faster, by default False</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.loudness.Meter.apply_filter">
<span class="sig-name descname"><span class="pre">apply_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/loudness.html#Meter.apply_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.loudness.Meter.apply_filter" title="Permalink to this definition"></a></dt>
<dd><p>Applies filter on either CPU or GPU, depending
on if the audio is on GPU or is on CPU, or if
<code class="docutils literal notranslate"><span class="pre">self.use_fir</span></code> is True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>torch.Tensor</em>) – Audio data of shape (nb, nch, nt).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Filtered audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.loudness.Meter.apply_filter_cpu">
<span class="sig-name descname"><span class="pre">apply_filter_cpu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/loudness.html#Meter.apply_filter_cpu"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.loudness.Meter.apply_filter_cpu" title="Permalink to this definition"></a></dt>
<dd><p>Performs IIR formulation of loudness computation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>torch.Tensor</em>) – Audio data of shape (nb, nch, nt).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Filtered audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.loudness.Meter.apply_filter_gpu">
<span class="sig-name descname"><span class="pre">apply_filter_gpu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/loudness.html#Meter.apply_filter_gpu"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.loudness.Meter.apply_filter_gpu" title="Permalink to this definition"></a></dt>
<dd><p>Performs FIR approximation of loudness computation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>torch.Tensor</em>) – Audio data of shape (nb, nch, nt).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Filtered audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.loudness.Meter.filter_class">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">filter_class</span></span><a class="headerlink" href="#audiotools.core.loudness.Meter.filter_class" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.loudness.Meter.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/loudness.html#Meter.forward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.loudness.Meter.forward" title="Permalink to this definition"></a></dt>
<dd><p>Computes integrated loudness of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>torch.Tensor</em>) – Audio data of shape (nb, nch, nt).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Filtered audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.loudness.Meter.integrated_loudness">
<span class="sig-name descname"><span class="pre">integrated_loudness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/loudness.html#Meter.integrated_loudness"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.loudness.Meter.integrated_loudness" title="Permalink to this definition"></a></dt>
<dd><p>Computes integrated loudness of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>torch.Tensor</em>) – Audio data of shape (nb, nch, nt).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Filtered audio data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.loudness.Meter.training">
<span class="sig-name descname"><span class="pre">training</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#audiotools.core.loudness.Meter.training" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-audiotools.core.playback">
<span id="listening-to-audiosignals"></span><h2>Listening to AudioSignals<a class="headerlink" href="#module-audiotools.core.playback" title="Permalink to this heading"></a></h2>
<p>These are utilities that allow one to embed an AudioSignal
as a playable object in a Jupyter notebook, or to play audio from
the terminal, etc.</p>
<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.playback.PlayMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.playback.</span></span><span class="sig-name descname"><span class="pre">PlayMixin</span></span><a class="reference internal" href="../_modules/audiotools/core/playback.html#PlayMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.playback.PlayMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.playback.PlayMixin.embed">
<span class="sig-name descname"><span class="pre">embed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_html</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/playback.html#PlayMixin.embed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.playback.PlayMixin.embed" title="Permalink to this definition"></a></dt>
<dd><p>Embeds audio as a playable audio embed in a notebook, or HTML
document, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ext</strong> (<em>str</em><em>, </em><em>optional</em>) – Extension to use when saving the audio, by default “.wav”</p></li>
<li><p><strong>display</strong> (<em>bool</em><em>, </em><em>optional</em>) – This controls whether or not to display the audio when called. This
is used when the embed is the last line in a Jupyter cell, to prevent
the audio from being embedded twice, by default True</p></li>
<li><p><strong>return_html</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to return the data wrapped in an HTML audio element, by default False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Either the element for display, or the HTML string of it.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.playback.PlayMixin.play">
<span class="sig-name descname"><span class="pre">play</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/playback.html#PlayMixin.play"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.playback.PlayMixin.play" title="Permalink to this definition"></a></dt>
<dd><p>Plays an audio signal if ffplay from the ffmpeg suite of tools is installed.
Otherwise, will fail. The audio signal is written to a temporary file
and then played with ffplay.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="audiotools.core.playback.PlayMixin.widget">
<span class="sig-name descname"><span class="pre">widget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'.wav'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">player_width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'100%'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'10px'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'specshow'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_html</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/playback.html#PlayMixin.widget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.playback.PlayMixin.widget" title="Permalink to this definition"></a></dt>
<dd><p>Creates a playable widget with spectrogram. Inspired (heavily) by
<a class="reference external" href="https://sjvasquez.github.io/blog/melnet/">https://sjvasquez.github.io/blog/melnet/</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of plot, placed in upper right of top-most axis.</p></li>
<li><p><strong>ext</strong> (<em>str</em><em>, </em><em>optional</em>) – Extension for embedding, by default “.mp3”</p></li>
<li><p><strong>add_headers</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether or not to add headers (use for first embed, False for later embeds), by default True</p></li>
<li><p><strong>player_width</strong> (<em>str</em><em>, </em><em>optional</em>) – Width of the player, as a string in a CSS rule, by default “100%”</p></li>
<li><p><strong>margin</strong> (<em>str</em><em>, </em><em>optional</em>) – Margin on all sides of player, by default “10px”</p></li>
<li><p><strong>plot_fn</strong> (<em>function</em><em>, </em><em>optional</em>) – Plotting function to use (by default self.specshow).</p></li>
<li><p><strong>return_html</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to return the data wrapped in an HTML audio element, by default False</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to plot_fn (by default self.specshow).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>HTML object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>HTML</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-audiotools.core.util">
<span id="utilities"></span><h2>Utilities<a class="headerlink" href="#module-audiotools.core.util" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="audiotools.core.util.Info">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">Info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_frames</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#Info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.Info" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Shim for torchaudio.info API changes.</p>
<dl class="py property">
<dt class="sig sig-object py" id="audiotools.core.util.Info.duration">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">duration</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#audiotools.core.util.Info.duration" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.util.Info.num_frames">
<span class="sig-name descname"><span class="pre">num_frames</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#audiotools.core.util.Info.num_frames" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="audiotools.core.util.Info.sample_rate">
<span class="sig-name descname"><span class="pre">sample_rate</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#audiotools.core.util.Info.sample_rate" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.chdir">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">chdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Path</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#chdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.chdir" title="Permalink to this definition"></a></dt>
<dd><p>Context manager for switching directories to run a
function. Useful for when you want to use relative
paths to different runs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>newdir</strong> (<em>Union</em><em>[</em><em>Path</em><em>, </em><em>str</em><em>]</em>) – Directory to switch to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.choose_from_list_of_lists">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">choose_from_list_of_lists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RandomState</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_of_lists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#choose_from_list_of_lists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.choose_from_list_of_lists" title="Permalink to this definition"></a></dt>
<dd><p>Choose a single item from a list of lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<em>np.random.RandomState</em>) – Random state to use when choosing an item.</p></li>
<li><p><strong>list_of_lists</strong> (<em>list</em>) – A list of lists from which items will be drawn.</p></li>
<li><p><strong>p</strong> (<em>float</em><em>, </em><em>optional</em>) – Probabilities of each list, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An item from the list of lists.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.collate">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">collate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_of_dicts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_splits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#collate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.collate" title="Permalink to this definition"></a></dt>
<dd><p>Collates a list of dictionaries (e.g. as returned by a
dataloader) into a dictionary with batched values. This routine
uses the default torch collate function for everything
except AudioSignal objects, which are handled by the
<a class="reference internal" href="#audiotools.core.audio_signal.AudioSignal.batch" title="audiotools.core.audio_signal.AudioSignal.batch"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.audio_signal.AudioSignal.batch()</span></code></a>
function.</p>
<p>This function takes n_splits to enable splitting a batch
into multiple sub-batches for the purposes of gradient accumulation,
etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_dicts</strong> (<em>list</em>) – List of dictionaries to be collated.</p></li>
<li><p><strong>n_splits</strong> (<em>int</em>) – Number of splits to make when creating the batches (split into
sub-batches). Useful for things like gradient accumulation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary containing batched data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.ensure_tensor">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">ensure_tensor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#ensure_tensor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.ensure_tensor" title="Permalink to this definition"></a></dt>
<dd><p>Ensures that the input <code class="docutils literal notranslate"><span class="pre">x</span></code> is a tensor of specified
dimensions and batch size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>Union</em><em>[</em><em>np.ndarray</em><em>, </em><em>torch.Tensor</em><em>, </em><em>float</em><em>, </em><em>int</em><em>]</em>) – Data that will become a tensor on its way out.</p></li>
<li><p><strong>ndim</strong> (<em>int</em><em>, </em><em>optional</em>) – How many dimensions should be in the output, by default None</p></li>
<li><p><strong>batch_size</strong> (<em>int</em><em>, </em><em>optional</em>) – The batch size of the output, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Modified version of <code class="docutils literal notranslate"><span class="pre">x</span></code> as a tensor.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.find_audio">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">find_audio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['.wav',</span> <span class="pre">'.flac',</span> <span class="pre">'.mp3',</span> <span class="pre">'.mp4']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#find_audio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.find_audio" title="Permalink to this definition"></a></dt>
<dd><p>Finds all audio files in a directory recursively.
Returns a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder</strong> (<em>str</em>) – Folder to look for audio files in, recursively.</p></li>
<li><p><strong>ext</strong> (<em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Extensions to look for without the ., by default
<code class="docutils literal notranslate"><span class="pre">['.wav',</span> <span class="pre">'.flac',</span> <span class="pre">'.mp3',</span> <span class="pre">'.mp4']</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.format_figure">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">format_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fig_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format_axes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">font_color</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'white'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#format_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.format_figure" title="Permalink to this definition"></a></dt>
<dd><p>Prettifies the spectrogram and waveform plots. A title
can be inset into the top right corner, and the axes can be
inset into the figure, allowing the data to take up the entire
image. Used in</p>
<ul class="simple">
<li><p><a class="reference internal" href="#audiotools.core.display.DisplayMixin.specshow" title="audiotools.core.display.DisplayMixin.specshow"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.display.DisplayMixin.specshow()</span></code></a></p></li>
<li><p><a class="reference internal" href="#audiotools.core.display.DisplayMixin.waveplot" title="audiotools.core.display.DisplayMixin.waveplot"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.display.DisplayMixin.waveplot()</span></code></a></p></li>
<li><p><a class="reference internal" href="#audiotools.core.display.DisplayMixin.wavespec" title="audiotools.core.display.DisplayMixin.wavespec"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.core.display.DisplayMixin.wavespec()</span></code></a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fig_size</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Size of figure, by default (9, 3)</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title to inset in top right, by default None</p></li>
<li><p><strong>fig</strong> (<em>matplotlib.figure.Figure</em><em>, </em><em>optional</em>) – Figure object, if None <code class="docutils literal notranslate"><span class="pre">plt.gcf()</span></code> will be used, by default None</p></li>
<li><p><strong>format_axes</strong> (<em>bool</em><em>, </em><em>optional</em>) – Format the axes to be inside the figure, by default True</p></li>
<li><p><strong>format</strong> (<em>bool</em><em>, </em><em>optional</em>) – This formatting can be skipped entirely by passing <code class="docutils literal notranslate"><span class="pre">format=False</span></code>
to any of the plotting functions that use this formater, by default True</p></li>
<li><p><strong>font_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of font of axes, by default “white”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.generate_chord_dataset">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">generate_chord_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_voices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">44100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_items</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_note</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'C2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_note</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'C6'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'chords'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#generate_chord_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.generate_chord_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Generates a toy multitrack dataset of chords, synthesized from sine waves.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_voices</strong> (<em>int</em><em>, </em><em>optional</em>) – Maximum number of voices in a chord, by default 8</p></li>
<li><p><strong>sample_rate</strong> (<em>int</em><em>, </em><em>optional</em>) – Sample rate of audio, by default 44100</p></li>
<li><p><strong>num_items</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of items to generate, by default 5</p></li>
<li><p><strong>duration</strong> (<em>float</em><em>, </em><em>optional</em>) – Duration of each item, by default 1.0</p></li>
<li><p><strong>min_note</strong> (<em>str</em><em>, </em><em>optional</em>) – Minimum note in the dataset, by default “C2”</p></li>
<li><p><strong>max_note</strong> (<em>str</em><em>, </em><em>optional</em>) – Maximum note in the dataset, by default “C6”</p></li>
<li><p><strong>output_dir</strong> (<em>Path</em><em>, </em><em>optional</em>) – Directory to save the dataset, by default “chords”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.hz_to_bin">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">hz_to_bin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_fft</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#hz_to_bin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.hz_to_bin" title="Permalink to this definition"></a></dt>
<dd><p>Closest frequency bin given a frequency, number
of bins, and a sampling rate.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hz</strong> (<em>torch.Tensor</em>) – Tensor of frequencies in Hz.</p></li>
<li><p><strong>n_fft</strong> (<em>int</em>) – Number of FFT bins.</p></li>
<li><p><strong>sample_rate</strong> (<em>int</em>) – Sample rate of audio.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Closest bins to the data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>torch.Tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.info">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.info" title="Permalink to this definition"></a></dt>
<dd><p>Shim for torchaudio.info to make 0.7.2 API match 0.8.0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>audio_path</strong> (<em>str</em>) – Path to audio file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.prepare_batch">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">prepare_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#prepare_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.prepare_batch" title="Permalink to this definition"></a></dt>
<dd><p>Moves items in a batch (typically generated by a DataLoader as a list
or a dict) to the specified device. This works even if dictionaries
are nested.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>batch</strong> (<em>Union</em><em>[</em><em>dict</em><em>, </em><em>list</em><em>, </em><em>torch.Tensor</em><em>]</em>) – Batch, typically generated by a dataloader, that will be moved to
the device.</p></li>
<li><p><strong>device</strong> (<em>str</em><em>, </em><em>optional</em>) – Device to move batch to, by default “cpu”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Batch with all values moved to the specified device.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Union</em>[dict, list, torch.Tensor]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.random_state">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">random_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">RandomState</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#random_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.random_state" title="Permalink to this definition"></a></dt>
<dd><p>Turn seed into a np.random.RandomState instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>seed</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>np.random.RandomState</em><em>] or </em><em>None</em>) – If seed is None, return the RandomState singleton used by np.random.
If seed is an int, return a new RandomState instance seeded with seed.
If seed is already a RandomState instance, return it.
Otherwise raise ValueError.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Random state object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.random.RandomState</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If seed is not valid, an error is thrown.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.read_sources">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">read_sources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['.wav',</span> <span class="pre">'.flac',</span> <span class="pre">'.mp3',</span> <span class="pre">'.mp4']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#read_sources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.read_sources" title="Permalink to this definition"></a></dt>
<dd><p>Reads audio sources that can either be folders
full of audio files, or CSV files that contain paths
to audio files. CSV files that adhere to the expected
format can be generated by
<a class="reference internal" href="audiotools.data.html#audiotools.data.preprocess.create_csv" title="audiotools.data.preprocess.create_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiotools.data.preprocess.create_csv()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sources</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of audio sources to be converted into a
list of lists of audio files.</p></li>
<li><p><strong>remove_empty</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether or not to remove rows with an empty “path”
from each CSV file, by default True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of lists of rows of CSV files.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.sample_from_dist">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">sample_from_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dist_tuple</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">RandomState</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#sample_from_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.sample_from_dist" title="Permalink to this definition"></a></dt>
<dd><p>Samples from a distribution defined by a tuple. The first
item in the tuple is the distribution type, and the rest of the
items are arguments to that distribution. The distribution function
is gotten from the <code class="docutils literal notranslate"><span class="pre">np.random.RandomState</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dist_tuple</strong> (<em>tuple</em>) – Distribution tuple</p></li>
<li><p><strong>state</strong> (<em>np.random.RandomState</em><em>, </em><em>optional</em>) – Random state, or seed to use, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Draw from the distribution.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Union</em>[float, int, str]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Sample from a uniform distribution:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dist_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;uniform&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_from_dist</span><span class="p">(</span><span class="n">dist_tuple</span><span class="p">)</span>
</pre></div>
</div>
<p>Sample from a constant distribution:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dist_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;const&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_from_dist</span><span class="p">(</span><span class="n">dist_tuple</span><span class="p">)</span>
</pre></div>
</div>
<p>Sample from a normal distribution:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dist_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_from_dist</span><span class="p">(</span><span class="n">dist_tuple</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="audiotools.core.util.seed">
<span class="sig-prename descclassname"><span class="pre">audiotools.core.util.</span></span><span class="sig-name descname"><span class="pre">seed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_seed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_cudnn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/audiotools/core/util.html#seed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#audiotools.core.util.seed" title="Permalink to this definition"></a></dt>
<dd><p>Seeds all random states with the same random seed
for reproducibility. Seeds <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">random</span></code> and <code class="docutils literal notranslate"><span class="pre">torch</span></code>
random generators.
For full reproducibility, two further options must be set
according to the torch documentation:
<a class="reference external" href="https://pytorch.org/docs/stable/notes/randomness.html">https://pytorch.org/docs/stable/notes/randomness.html</a>
To do this, <code class="docutils literal notranslate"><span class="pre">set_cudnn</span></code> must be True. It defaults to
False, since setting it to True results in a performance
hit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>random_seed</strong> (<em>int</em>) – integer corresponding to random seed to</p></li>
<li><p><strong>use.</strong> – </p></li>
<li><p><strong>set_cudnn</strong> (<em>bool</em>) – Whether or not to set cudnn into determinstic</p></li>
<li><p><strong>False.</strong> (<em>mode and off</em><em> of </em><em>benchmark mode. Defaults to</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../tutorials/listening_tests.html" class="btn btn-neutral float-left" title="Creating listening tests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="audiotools.data.html" class="btn btn-neutral float-right" title="Data processing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Prem Seetharaman, Lucas Gestin.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>